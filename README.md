# è´ªåƒè›‡æ¸¸æˆ - Next.js + TypeScript + Python

ä¸€ä¸ªä½¿ç”¨ Next.js 14ã€TypeScript å’Œ Python æž„å»ºçš„å‰åŽç«¯åˆ†ç¦»çš„è´ªåƒè›‡æ¸¸æˆï¼Œæ”¯æŒå¼ºåŒ–å­¦ä¹ è®­ç»ƒã€‚

## é¡¹ç›®ç»“æž„

```
snake-demo/
â”œâ”€â”€ frontend/              # å‰ç«¯é¡¹ç›®ï¼ˆNext.js + TypeScriptï¼‰
â”‚   â”œâ”€â”€ app/              # Next.js App Router
â”‚   â”œâ”€â”€ components/      # React ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/           # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ lib/             # æ ¸å¿ƒé€»è¾‘åº“
â”‚   â”‚   â”œâ”€â”€ game/        # æ¸¸æˆé€»è¾‘æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ rendering/   # æ¸²æŸ“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ rl/          # RLç›¸å…³ï¼ˆçŠ¶æ€æå–ã€å¥–åŠ±è®¡ç®—ï¼‰
â”‚   â”‚   â””â”€â”€ api/         # APIå®¢æˆ·ç«¯
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ backend/              # åŽç«¯é¡¹ç›®ï¼ˆPython + FastAPIï¼‰
â”‚   â”œâ”€â”€ app/              # FastAPIåº”ç”¨
â”‚   â”‚   â”œâ”€â”€ api/         # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ core/        # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ models/      # æ•°æ®æ¨¡åž‹
â”‚   â”‚   â””â”€â”€ services/    # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ models/          # è®­ç»ƒå¥½çš„æ¨¡åž‹å­˜å‚¨
â”‚   â””â”€â”€ requirements.txt
â”‚
â””â”€â”€ docs/                 # æ–‡æ¡£
    â”œâ”€â”€ architecture.md   # æž¶æž„è®¾è®¡æ–‡æ¡£
    â””â”€â”€ ...
```

## å¿«é€Ÿå¼€å§‹

> ðŸ’¡ **å¿«é€Ÿå¯åŠ¨**ï¼šæŸ¥çœ‹ [QUICKSTART.md](./QUICKSTART.md) èŽ·å–5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨æŒ‡å—

### å‰ç½®è¦æ±‚

- **Node.js** 18+ å’Œ npm
- **Python** 3.10+
- **Git**

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/Miss-you/snake-rl.git
cd snake-rl
```

### 2. å‰ç«¯è®¾ç½®

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# åˆ›å»ºçŽ¯å¢ƒå˜é‡æ–‡ä»¶ï¼ˆå¦‚æžœä¸å­˜åœ¨ï¼‰
cat > .env.local << EOF
NEXT_PUBLIC_API_URL=http://localhost:8000
EOF

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯å°†åœ¨ **http://localhost:3000** è¿è¡Œ

### 3. åŽç«¯è®¾ç½®

æ‰“å¼€**æ–°çš„ç»ˆç«¯çª—å£**ï¼Œæ‰§è¡Œï¼š

```bash
# è¿›å…¥åŽç«¯ç›®å½•
cd backend

# åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
# macOS/Linux:
source venv/bin/activate
# Windows:
venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# åˆ›å»ºçŽ¯å¢ƒå˜é‡æ–‡ä»¶ï¼ˆå¦‚æžœä¸å­˜åœ¨ï¼‰
cat > .env << EOF
API_HOST=0.0.0.0
API_PORT=8000
MODEL_DIR=./models
LOG_LEVEL=info
CORS_ORIGINS=http://localhost:3000
EOF

# å¯åŠ¨åŽç«¯æœåŠ¡
# macOS/Linux:
./start.sh
# Windows:
start.bat
# æˆ–æ‰‹åŠ¨è¿è¡Œ:
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

åŽç«¯å°†åœ¨ **http://localhost:8000** è¿è¡Œ

### 4. éªŒè¯è¿è¡Œ

1. **è®¿é—®å‰ç«¯**ï¼šæ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3000
2. **è®¿é—®åŽç«¯APIæ–‡æ¡£**ï¼šhttp://localhost:8000/docs
3. **æµ‹è¯•æ¸¸æˆ**ï¼šåœ¨å‰ç«¯é¡µé¢å¯åŠ¨æ¸¸æˆï¼Œä½¿ç”¨æ–¹å‘é”®æˆ–WASDæŽ§åˆ¶

### 5. åŒæ—¶è¿è¡Œå‰åŽç«¯ï¼ˆæŽ¨èï¼‰

**æ–¹æ¡ˆ1ï¼šä¸¤ä¸ªç»ˆç«¯çª—å£**
- ç»ˆç«¯1ï¼š`cd frontend && npm run dev`
- ç»ˆç«¯2ï¼š`cd backend && ./start.sh`ï¼ˆæˆ– `start.bat`ï¼‰

**æ–¹æ¡ˆ2ï¼šä½¿ç”¨è„šæœ¬ï¼ˆmacOS/Linuxï¼‰**

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
./scripts/start-all.sh

# åœæ­¢æ‰€æœ‰æœåŠ¡
./scripts/stop-all.sh
```

## æž¶æž„è¯´æ˜Ž

### å‰åŽç«¯åˆ†ç¦»æž¶æž„

- **å‰ç«¯**ï¼šè´Ÿè´£æ¸¸æˆè¿è¡Œã€UIæ¸²æŸ“ã€ç»éªŒæ”¶é›†
- **åŽç«¯**ï¼šè´Ÿè´£RLæ¨¡åž‹è®­ç»ƒã€æ¨¡åž‹å­˜å‚¨ã€APIæœåŠ¡

è¯¦ç»†æž¶æž„è®¾è®¡è¯·å‚è€ƒ [docs/architecture.md](./docs/architecture.md)

### APIç«¯ç‚¹

- `POST /api/experience` - æäº¤ç»éªŒæ•°æ®
- `GET /api/experience/count` - èŽ·å–ç»éªŒæ•°é‡
- `POST /api/predict` - é¢„æµ‹åŠ¨ä½œï¼ˆæŽ¨ç†ï¼‰
- `POST /api/train` - å¼€å§‹è®­ç»ƒ
- `GET /api/train/status` - èŽ·å–è®­ç»ƒçŠ¶æ€
- `GET /api/model/latest` - èŽ·å–æœ€æ–°æ¨¡åž‹

## ç‰¹æ€§

- âœ… **TypeScript** - å®Œæ•´çš„ç±»åž‹å®‰å…¨
- âœ… **æ¨¡å—åŒ–è®¾è®¡** - æ¸…æ™°çš„ä»£ç ç»„ç»‡ï¼Œä¾¿äºŽç»´æŠ¤
- âœ… **Next.js 14** - ä½¿ç”¨æœ€æ–°çš„ App Router
- âœ… **FastAPI** - é«˜æ€§èƒ½çš„Python Webæ¡†æž¶
- âœ… **å‰åŽç«¯åˆ†ç¦»** - æ¸…æ™°çš„èŒè´£åˆ’åˆ†
- âœ… **RLæŽ¨ç†æ”¯æŒ** - å‰ç«¯è°ƒç”¨åŽç«¯æ¨¡åž‹è¿›è¡ŒæŽ¨ç†ï¼ˆè®­ç»ƒåœ¨åŽç«¯ï¼‰
- âœ… **AI æ¨¡å¼** - æ™ºèƒ½è´ªåƒè›‡ AIï¼Œæ”¯æŒå°¾éƒ¨å¯è¾¾æ€§æ£€æŸ¥
- âœ… **äººå·¥æŽ§åˆ¶** - æ”¯æŒæ–¹å‘é”®å’Œ WASD æŽ§åˆ¶
- âœ… **çŽ°ä»£åŒ– UI** - æ·±è‰²ä¸»é¢˜ï¼Œæµç•…åŠ¨ç”»

## æ¸¸æˆæŽ§åˆ¶

- **æ–¹å‘é”®** æˆ– **WASD** - æŽ§åˆ¶è›‡çš„ç§»åŠ¨æ–¹å‘
- **ç©ºæ ¼é”®** - å¼€å§‹/é‡æ–°å¼€å§‹æ¸¸æˆ
- **1** - åˆ‡æ¢åˆ°äººå·¥æŽ§åˆ¶æ¨¡å¼
- **2** - åˆ‡æ¢åˆ° AI è‡ªåŠ¨æŽ§åˆ¶æ¨¡å¼
- **3** - åˆ‡æ¢åˆ° RLæŽ¨ç†æ¨¡å¼ï¼ˆè®­ç»ƒåœ¨åŽç«¯ï¼‰

## å¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learningï¼‰

é¡¹ç›®å·²å‡†å¤‡å¥½å¼ºåŒ–å­¦ä¹ çš„åŸºç¡€è®¾æ–½ï¼

### å·²å®žçŽ°çš„åŠŸèƒ½

- âœ… **çŠ¶æ€æå–å™¨** (`lib/rl/stateExtractor.ts`) - å°†æ¸¸æˆçŠ¶æ€è½¬æ¢ä¸ºç‰¹å¾å‘é‡
- âœ… **å¥–åŠ±è®¡ç®—å™¨** (`lib/rl/rewardCalculator.ts`) - æ ¹æ®æ¸¸æˆäº‹ä»¶è®¡ç®—å¥–åŠ±
- âœ… **APIå®¢æˆ·ç«¯** (`lib/api/client.ts`) - ä¸ŽåŽç«¯é€šä¿¡
- âœ… **ç»éªŒæ”¶é›†å™¨** (`lib/api/experienceCollector.ts`) - æ”¶é›†å¹¶å‘é€ç»éªŒåˆ°åŽç«¯
- âœ… **RLæŽ¨ç†Agent** (`lib/api/rlAgent.ts`) - è°ƒç”¨åŽç«¯APIè¿›è¡ŒæŽ¨ç†
- âœ… **RLæŽ¨ç†Hook** (`hooks/useRLInference.ts`) - ç®¡ç†æŽ¨ç†çŠ¶æ€
- âš ï¸ **Q-Learningå‚è€ƒ** (`lib/rl/qLearning.ts`) - ä»…ä½œå­¦ä¹ å‚è€ƒï¼Œ**ä¸åº”åœ¨å‰ç«¯ä½¿ç”¨**

### å­¦ä¹ èµ„æº

- ðŸ“– [å¼ºåŒ–å­¦ä¹ å­¦ä¹ æŒ‡å—](./docs/reinforcement-learning.md) - è¯¦ç»†çš„ç†è®ºå’Œå®žè·µæŒ‡å—
- ðŸ“– [RLå¸¸è§é—®é¢˜è§£ç­”](./docs/rl-faq.md) - è§£ç­”å¸¸è§é—®é¢˜
- ðŸ“– [RLå®žæ–½è®¡åˆ’](./docs/rl-implementation-plan.md) - åˆ†é˜¶æ®µå®žæ–½è·¯çº¿å›¾
- ðŸ“– [æž¶æž„è®¾è®¡æ–‡æ¡£](./docs/architecture.md) - å‰åŽç«¯åˆ†ç¦»æž¶æž„è¯´æ˜Ž
- ðŸ“– [RLæž¶æž„è¯´æ˜Ž](./docs/rl-architecture.md) - RLè®­ç»ƒåœ¨åŽç«¯ï¼ŒæŽ¨ç†åœ¨å‰ç«¯

## å¼€å‘è®¡åˆ’

- [x] å‰åŽç«¯åˆ†ç¦»æž¶æž„
- [x] APIæŽ¥å£å®šä¹‰
- [x] ç»éªŒæ”¶é›†å’Œæäº¤
- [x] æ¨¡åž‹æŽ¨ç†æŽ¥å£
- [ ] å®žçŽ°DQNè®­ç»ƒæœåŠ¡
- [ ] è®­ç»ƒå¯è§†åŒ–ç•Œé¢
- [ ] æ¨¡åž‹ç‰ˆæœ¬ç®¡ç†
- [ ] æ·»åŠ æ¸¸æˆéš¾åº¦é€‰æ‹©
- [ ] æ·»åŠ æŽ’è¡Œæ¦œåŠŸèƒ½

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Next.js 14** - React æ¡†æž¶
- **TypeScript** - ç±»åž‹å®‰å…¨
- **Canvas API** - æ¸¸æˆæ¸²æŸ“
- **React Hooks** - çŠ¶æ€ç®¡ç†

### åŽç«¯
- **FastAPI** - Python Webæ¡†æž¶
- **PyTorch** - æ·±åº¦å­¦ä¹ æ¡†æž¶
- **Pydantic** - æ•°æ®éªŒè¯
- **Uvicorn** - ASGIæœåŠ¡å™¨

## è®¸å¯è¯

MIT
